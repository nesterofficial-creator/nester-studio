<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Nest Films </title>

  <!-- SEO Metadata -->
  <meta name="description" content="Nest Films – A premium streaming platform for films you produced or legally distribute.">
  <meta name="keywords" content="Nest Films, film streaming, licensed films, independent films">
  <meta name="author" content="Nest Films">

  <!-- Brand Styles -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --brand-primary: #0ea5a4;
      --brand-bg: #0f1720;
      --brand-card: #0b1220;
      --brand-text: #e6eef6;
      --brand-sub: #9fb8c6;
    }

    body {
      font-family: system-ui, -apple-system, Roboto;
      margin: 0;
      background: var(--brand-bg);
      color: var(--brand-text);
    }

    /* NAVBAR */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 32px;
      background: #0d1a2a;
      position: sticky;
      top: 0;
      z-index: 20;
      box-shadow: 0 4px 12px rgba(0,0,0,.4);
    }

    .logo {
      font-size: 24px;
      font-weight: 800;
      letter-spacing: -0.5px;
      color: var(--brand-primary);
    }

    .nav-links a {
      margin-left: 20px;
      text-decoration: none;
      color: var(--brand-text);
      font-weight: 500;
    }

    /* HERO */
    .hero {
      padding: 80px 32px;
      text-align: center;
    }

    .hero h1 {
      font-size: 48px;
      margin-bottom: 12px;
    }

    .hero p {
      font-size: 20px;
      color: var(--brand-sub);
      max-width: 700px;
      margin: auto;
    }

    /* LAYOUT */
    .container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 32px;
      display: flex;
      gap: 24px;
    }

    .player {
      flex: 1;
      background: var(--brand-card);
      padding: 20px;
      border-radius: 14px;
      box-shadow: 0 8px 30px rgba(2,6,23,.6);
    }

    video {
      width: 100%;
      border-radius: 10px;
      background: black;
    }

    .sidebar {
      width: 320px;
    }

    .item {
      background: #071023;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: 0.2s;
    }

    .item:hover {
      background: #0a142b;
    }

    .item.active {
      outline: 2px solid var(--brand-primary);
    }

    button {
      background: var(--brand-primary);
      border: none;
      color: #012;
      padding: 10px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }

    button.secondary {
      background: transparent;
      border: 1px solid rgba(255,255,255,.1);
      color: var(--brand-text);
    }

    .footer {
      margin-top: 80px;
      padding: 30px;
      text-align: center;
      color: var(--brand-sub);
    }

    .note {
      font-size: 13px;
      color: var(--brand-sub);
      margin-top: 12px;
    }

    /* FORM (Sign Up & Login) */
    .form-region {
      background: #071426;
      padding: 12px;
      border-radius: 10px;
      margin-top: 18px;
    }

    .form-region h4 {
      margin: 0 0 8px 0;
      color: var(--brand-primary);
      font-size: 16px;
    }

    .signup-form, .login-form {
      display: none;
      margin-top: 8px;
      flex-direction: column;
      gap: 8px;
    }

    .signup-form input, .login-form input, .signup-form select {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,.06);
      background: rgba(255,255,255,.02);
      color: var(--brand-text);
    }

    .signup-form .form-actions, .login-form .form-actions {
      display: flex;
      gap: 8px;
      justify-content: flex-end;
    }

    .signup-success, .login-success {
      color: #7fffd4;
      font-size: 13px;
      margin-top: 8px;
    }

    /* Floating Icons */
    .floating-icons {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 1000;
    }

    .floating-icon {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      font-size: 24px;
      transition: 0.3s;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .floating-icon.whatsapp {
      background: #25d366;
      color: white;
    }

    .floating-icon.whatsapp:hover {
      background: #128c7e;
      transform: scale(1.1);
    }

    .floating-icon.email {
      background: var(--brand-primary);
      color: white;
    }

    .floating-icon.email:hover {
      background: #0b8a89;
      transform: scale(1.1);
    }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        padding: 0 16px;
      }
      .sidebar {
        width: 100%;
        order: -1; /* Move sidebar above player on mobile */
      }
      .hero {
        padding: 60px 16px;
      }
      .hero h1 {
        font-size: 32px;
      }
      .hero p {
        font-size: 16px;
      }
      .navbar {
        padding: 18px 16px;
      }
      .nav-links {
        display: none; /* Hide nav links on mobile, or implement hamburger menu */
      }
      .player {
        padding: 16px;
      }
      .floating-icons {
        right: 16px;
        bottom: 16px;
      }
      .floating-icon {
        width: 48px;
        height: 48px;
        font-size: 20px;
      }
    }
  </style>
</head>
<body>

  <!-- NAVIGATION BAR -->
  <div class="navbar">
    <div class="logo">Nest Films</div>
    <div class="nav-links">
      <a href="#home">Home</a>
      <a href="#library">Library</a>
      <button id="loginNavBtn">Login</button>
      <button id="signupNavBtn">Sign Up</button>
    </div>
  </div>

  <!-- HERO SECTION -->
  <div class="hero" id="home">
    <h1>Welcome to Nest Films</h1>
    <p>Stream high-quality films you produced or legally license. Your stories, beautifully delivered to your audience.</p>
  </div>

  <!-- MAIN APP LAYOUT -->
  <div class="container" id="library">
    <div class="player">
      <video id="video" controls playsinline crossorigin="anonymous"></video>

      <div class="row" style="display:flex; justify-content:space-between; align-items:center; margin-top:12px;">
        <div>
          <div id="title" style="font-weight:700; font-size:20px;">Select a Film</div>
          <div id="desc" class="note">Choose a title from your licensed Nest Films library.</div>
        </div>
        <div style="display:flex; gap:8px;">
          <button id="downloadBtn" class="secondary" disabled>Download</button>
          <button id="fullscreenBtn">Fullscreen</button>
        </div>
      </div>

      <div id="status" class="note"></div>
    </div>

    <!-- FILM LIBRARY -->
    <div class="sidebar">
      <h3>Nest Films Library</h3>

      <!-- FORM REGION -->
      <div id="form-add-region" class="form-region">
        <h4>Join Nest Films</h4>
        <div class="note">Create an account or login to manage your licensed films.</div>

        <!-- Signup Form -->
        <form id="signupForm" class="signup-form" aria-hidden="true">
          <input type="text" id="signupName" placeholder="Full name" required />
          <input type="email" id="signupEmail" placeholder="Email address" required />
          <select id="signupRegion" required>
            <option value="" disabled selected>Select country or region</option>
            <option value="United States">United States</option>
            <option value="Canada">Canada</option>
            <option value="United Kingdom">United Kingdom</option>
            <option value="Australia">Australia</option>
            <option value="India">India</option>
            <option value="Germany">Germany</option>
            <option value="France">France</option>
            <option value="other">Other (please specify)</option>
          </select>
          <input type="text" id="signupOtherRegion" placeholder="Specify country or region" style="display:none" />
          <input type="password" id="signupPassword" placeholder="Password" required />
          <div class="form-actions">
            <button type="submit">Create Account</button>
            <button type="button" id="signupCancel" class="secondary">Cancel</button>
          </div>
          <div id="signupMessage" class="signup-success" style="display:none"></div>
        </form>

        <!-- Login Form -->
        <form id="loginForm" class="login-form" aria-hidden="true">
          <input type="email" id="loginEmail" placeholder="Email address" required />
          <input type="password" id="loginPassword" placeholder="Password" required />
          <div class="form-actions">
            <button type="submit">Login</button>
            <button type="button" id="loginCancel" class="secondary">Cancel</button>
          </div>
          <div id="loginMessage" class="login-success" style="display:none"></div>
        </form>
      </div>

      <!-- Example Library Items -->
      <h4 style="margin-top:20px; color:var(--brand-primary);">Cartoons</h4>
      <div class="item" data-title="Cartoon 1" data-stream="https://example.com/cartoon1/stream.m3u8" data-download="https://example.com/cartoon1/master.mp4">Cartoon 1</div>
      <h4 style="margin-top:20px; color:var(--brand-primary);">Horror</h4>
      <div class="item" data-title="Horror Film 1" data-stream="https://example.com/horror1/stream.m3u8" data-download="https://example.com/horror1/master.mp4">Horror Film 1</div>
      <h4 style="margin-top:20px; color:var(--brand-primary);">Drama</h4>
      <div class="item" data-title="Drama Film 1" data-stream="https://example.com/drama1/stream.m3u8" data-download="https://example.com/drama1/master.mp4">Drama Film 1</div>
      <h4 style="margin-top:20px; color:var(--brand-primary);">Action</h4>
      <div class="item" data-title="Action Film 1" data-stream="https://example.com/action1/stream.m3u8" data-download="https://example.com/action1/master.mp4">Action Film 1</div>
      <h4 style="margin-top:20px; color:var(--brand-primary);">Series</h4>
      <div class="item" data-title="Series Episode 1" data-stream="https://example.com/series1/stream.m3u8" data-download="https://example.com/series1/master.mp4">Series Episode 1</div>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="footer">
    Nest Films © 2025 • All content on this platform is legally owned or licensed.
  </div>

  <!-- HLS PLAYER SCRIPT -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.0/dist/hls.min.js"></script>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyBdRdA9cmfQiUy6yVZM-i3A704dRXR6NkU",
      authDomain: "nest-films.firebaseapp.com",
      projectId: "nest-films",
      storageBucket: "nest-films.appspot.com",
      messagingSenderId: "759452089508",
      appId: "1:759452089508:web:0ae3f499daec12302dba31"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // AUTH STATE
    onAuthStateChanged(auth, user => {
      if (user) {
        console.log("Logged in user:", user.email);
      } else {
        console.log("No user logged in");
      }
    });

    // Signup/Login Form Elements
    const signupForm = document.getElementById('signupForm');
    const signupCancel = document.getElementById('signupCancel');
    const signupMessage = document.getElementById('signupMessage');
    const signupNavBtn = document.getElementById('signupNavBtn');
    const signupRegionEl = document.getElementById('signupRegion');
    const signupOtherRegion = document.getElementById('signupOtherRegion');

    const loginForm = document.getElementById('loginForm');
    const loginCancel = document.getElementById('loginCancel');
    const loginMessage = document.getElementById('loginMessage');
    const loginNavBtn = document.getElementById('loginNavBtn');

    function showSignupForm() {
      signupForm.style.display = 'flex';
      signupForm.setAttribute('aria-hidden','false');
      loginForm.style.display = 'none';
    }

    function showLoginForm() {
      loginForm.style.display = 'flex';
      loginForm.setAttribute('aria-hidden','false');
      signupForm.style.display = 'none';
    }

    function hideSignupForm() { signupForm.style.display = 'none'; signupForm.setAttribute('aria-hidden','true'); signupMessage.style.display='none'; }
    function hideLoginForm() { loginForm.style.display = 'none'; loginForm.setAttribute('aria-hidden','true'); loginMessage.style.display='none'; }

    signupNavBtn.addEventListener('click', showSignupForm);
    loginNavBtn.addEventListener('click', showLoginForm);
    signupCancel.addEventListener('click', hideSignupForm);
    loginCancel.addEventListener('click', hideLoginForm);

    signupRegionEl.addEventListener('change', () => {
      signupOtherRegion.style.display = signupRegionEl.value==='other' ? 'block':'none';
    });

    // FIREBASE SIGNUP
    signupForm.addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('signupName').value.trim();
      const email = document.getElementById('signupEmail').value.trim();
      const password = document.getElementById('signupPassword').value;
      const region = signupRegionEl.value==='other' ? signupOtherRegion.value.trim() : signupRegionEl.value;

      if(!name || !email || !password || !region){
        signupMessage.style.display='block';
        signupMessage.textContent='Please fill all fields';
        return;
      }

      createUserWithEmailAndPassword(auth, email, password)
        .then(userCredential => {
          const user = userCredential.user;
          signupMessage.style.display='block';
          signupMessage.textContent=`Welcome ${name.split(' ')[0]}! Account created successfully.`;
          signupForm.reset();
          signupOtherRegion.style.display='none';
          setTimeout(hideSignupForm,3000);
        })
        .catch(err => {
          signupMessage.style.display='block';
          signupMessage.textContent = err.message;
        });
    });

    // FIREBASE LOGIN
    loginForm.addEventListener('submit', e => {
      e.preventDefault();
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPassword').value;

      if(!email || !password){
        loginMessage.style.display='block';
        loginMessage.textContent='Please enter email and password';
        return;
      }

      signInWithEmailAndPassword(auth, email, password)
        .then(userCredential => {
          const user = userCredential.user;
          loginMessage.style.display='block';
          loginMessage.textContent=`Logged in as ${user.email}`;
          loginForm.reset();
          setTimeout(hideLoginForm,2000);
        })
        .catch(err=>{
          loginMessage.style.display='block';
          loginMessage.textContent = err.message;
        });
    });

    // VIDEO PLAYER
    const video = document.getElementById('video');
    const titleEl = document.getElementById('title');
    const downloadBtn = document.getElementById('downloadBtn');
    const fullscreenBtn = document.getElementById('fullscreenBtn');
    let currentDownloadUrl = null;

    function play(stream){
      if(video.canPlayType('application/vnd.apple.mpegurl')){
        video.src=stream;
        video.play();
      } else {
        const hls = new Hls();
        hls.loadSource(stream);
        hls.attachMedia(video);
      }
    }

    document.querySelectorAll('.item').forEach(item=>{
      item.addEventListener('click',()=>{
        document.querySelectorAll('.item').forEach(i=>i.classList.remove('active'));
        item.classList.add('active');
        const t=item.dataset.title;
        const s=item.dataset.stream;
        const d=item.dataset.download;
        titleEl.textContent=t;
        currentDownloadUrl=d;
        downloadBtn.disabled=!d;
        play(s);
      });
    });

    downloadBtn.addEventListener('click',()=>{ if(currentDownloadUrl) window.location.href=currentDownloadUrl; });
    fullscreenBtn.addEventListener('click',()=>{ if(!document.fullscreenElement) video.requestFullscreen(); else document.exitFullscreen(); });
  </script>

  <!-- Floating Icons -->
  <div class="floating-icons">
    <a href="https://wa.me/+250796104069" target="_blank" class="floating-icon whatsapp" title="Contact us on WhatsApp">
      <i class="fab fa-whatsapp"></i>
    </a>
    <a href="mailto:nesterstu@gmail.com" class="floating-icon email" title="Send us an email">
      <i class="fas fa-envelope"></i>
    </a>
  </div>

</body>
</html>
